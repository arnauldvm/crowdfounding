source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(0,20000), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(time), stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_smooth(aes(y=rate)) +
scale_y_continuous("rate ($/d)", limits=c(0,20000), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(time), stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_smooth(aes(y=rate)) +
scale_y_continuous("rate ($/d)", limits=c(0,20000), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(time), stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(0,20000), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(time), stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(0,20000), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(time), stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(0,20000), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(time), stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
source('~/.active-rstudio-document')
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(0,20000), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(time), stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
max(data$pledged)
max(results$pledged)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/prj/crowdfounding/analyze.R')
cat(max(results$pledged))
source('~/prj/crowdfounding/analyze.R')
View(aggs)
source('~/.active-rstudio-document')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
View(results)
View(rows)
source('~/prj/crowdfounding/analyze.R')
View(results)
source('~/.active-rstudio-document')
View(results)
View(rows)
source('~/.active-rstudio-document')
View(results)
View(rows)
source('~/prj/crowdfounding/analyze.R')
View(results)
View(rows)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
View(rows)
source('~/prj/crowdfounding/analyze.R')
View(rows)
matrix(rows)
sapply(found$hits$hits, function(x) c(
x$fields$timestamp[[1]],
x$fields$pledged[[1]]
))
as.matrix(sapply(found$hits$hits, function(x) c(
x$fields$timestamp[[1]],
x$fields$pledged[[1]]
)))
matrix(sapply(found$hits$hits, function(x) c(
x$fields$timestamp[[1]],
x$fields$pledged[[1]]
)))
source('~/.active-rstudio-document')
View(results)
source('~/.active-rstudio-document')
View(results)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
View(rows)
View(results)
View(rows)
source('~/.active-rstudio-document')
View(results)
View(rows)
View(results)
View(rows)
View(rows)
sapply(found$hits$hits, function(x) c(
x$fields$timestamp[[1]],
x$fields$pledged[[1]]
))
t(sapply(found$hits$hits, function(x) c(
x$fields$timestamp[[1]],
x$fields$pledged[[1]]
)))
t(sapply(found$hits$hits, function(x) c(
x$fields$timestamp[[1]],
x$fields$pledged[[1]]
)))
rows=t(sapply(found$hits$hits, function(x) c(
results = rbind(results, rows)
)
)
,)
rows=t(sapply(found$hits$hits, function(x) c(
x$fields$timestamp[[1]],
x$fields$pledged[[1]]
)))
results = rbind(results, rows)
View(rows)
View(results)
View(rows)
source('~/prj/crowdfounding/analyze.R')
t(sapply(found$hits$hits, function(x) c(
x$fields$timestamp[[1]],
x$fields$pledged[[1]]
)))
source('~/prj/crowdfounding/analyze.R')
t(sapply(found$hits$hits, function(x) c(
x$fields$timestamp[[1]],
x$fields$pledged[[1]]
)))
source('~/prj/crowdfounding/analyze.R')
list()
length(list())
source('~/prj/crowdfounding/analyze.R')
dim(results)
dim(rows)
t(sapply(found$hits$hits, function(x) {
ts = x$fields$timestamp[[1]]
pl_list = x$fields$pledged
pl = ifelse(length(pl_list>0), pl_list[[1]], NA)
return(c(ts, pl))
}))
dim(t(sapply(found$hits$hits, function(x) {
ts = x$fields$timestamp[[1]]
pl_list = x$fields$pledged
pl = ifelse(length(pl_list>0), pl_list[[1]], NA)
return(c(ts, pl))
})))
dim(t(sapply(found$hits$hits, function(x) {
ts = x$fields$timestamp[[1]]
pl_list = x$fields$pledged
pl = ifelse(length(pl_list>0), pl_list[[1]], NA)
return(c(ts, pl))
}, simplify="array")))
sapply(found$hits$hits, function(x) {
ts = x$fields$timestamp[[1]]
pl_list = x$fields$pledged
pl = ifelse(length(pl_list>0), pl_list[[1]], NA)
return(c(ts, pl))
}, simplify="array")
sapply(found$hits$hits, function(x) {
ts = x$fields$timestamp[[1]]
pl_list = x$fields$pledged
pl = ifelse(length(pl_list>0), pl_list[[1]], NA)
return(c(ts, pl))
}, simplify=TRUE)
sapply(found$hits$hits, function(x) {
ts = x$fields$timestamp[[1]]
pl_list = x$fields$pledged
pl = ifelse(length(pl_list>0), pl_list[[1]], NA)
return(list(ts, pl))
}, simplify=TRUE)
t(sapply(found$hits$hits, function(x) {
ts = x$fields$timestamp[[1]]
pl_list = x$fields$pledged
pl = ifelse(length(pl_list>0), pl_list[[1]], NA)
return(list(ts, pl))
}, simplify=TRUE))
dim(t(sapply(found$hits$hits, function(x) {
ts = x$fields$timestamp[[1]]
pl_list = x$fields$pledged
pl = ifelse(length(pl_list>0), pl_list[[1]], NA)
return(list(ts, pl))
}, simplify=TRUE)))
dim(t(sapply(found$hits$hits, function(x) {
ts = x$fields$timestamp[[1]]
pl_list = x$fields$pledged
pl = ifelse(length(pl_list>0), pl_list[[1]], NA)
return(list(ts, pl))
})))
source('~/prj/crowdfounding/analyze.R')
View(results)
traceback()
View(results)
is.null(rows$timestamp)
is.null(rows$timestamp[])
rows$timestamp==""
rows$timestamp>0
rows$pledged==0
results$pledged==0
is.null(results$timestamp)
results$timestamp==""
results$timestamp[1]
results$timestamp[1]=="NULL"
results$timestamp=="NULL"
source('~/prj/crowdfounding/analyze.R')
pl
source('~/.active-rstudio-document')
View(results)
results$pledged[1]
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
View(results)
View(rows)
rows
tail(rows, 100)
found
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
View(results)
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
found[[1]]
found
found[1]
found$fields
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
View(rows)
is.na(rows)
rows[is.na(rows),]
rows[,is.na(rows)]
is.na(found$hits$hits$fields)
is.null(found$hits$hits$fields)
lappy(found$hits$hits, function(x) is.null(x$fields))
lapply(found$hits$hits, function(x) is.null(x$fields))
found$hits$hits[lapply(found$hits$hits, function(x) is.null(x$fields))]
found$hits$hits[[lapply(found$hits$hits, function(x) is.null(x$fields))]]
x = as.vector(found$hits$hits)
h=x
rm(x)
lapply(h, function(x) is.null(x$fields))
h[lapply(h, function(x) is.null(x$fields))]
h[sapply(h, function(x) is.null(x$fields))]
dim(h[sapply(h, function(x) is.null(x$fields))])
nrow(h[sapply(h, function(x) is.null(x$fields))])
length(h[sapply(h, function(x) is.null(x$fields))])
length(h[sapply(h, function(x) !is.null(x$fields))])
sapply(h, function(x) !is.null(x$fields))
h[sapply(h, function(x) !is.null(x$fields))]
dim(h[sapply(h, function(x) !is.null(x$fields))])
length(h[sapply(h, function(x) !is.null(x$fields))])
length(h)
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
traceback()
source('~/prj/crowdfounding/analyze.R')
traceback()
View(results)
min(results$time)
g = ggplot(results, aes(x=time)) +
geom_line(aes(y=pledged), linetype="dotted") +
geom_line(aes(y=pledged_cont), linetype="solid") +
geom_hline(yintercept=sg, size=0.5, alpha=0.2) +
scale_y_continuous("pledged ($)", limits=c(0,NA), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
#scale_y_continuous(pledged ($)", limits=c(0,NA), labels=function(x) sprintf("%.3f", x/1000), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(time), stop_time), minor_breaks=pretty_breaks(n=45))
ggplot(results, aes(x=time)) +
geom_line(aes(y=pledged), linetype="dotted") +
geom_line(aes(y=pledged_cont), linetype="solid") +
geom_hline(yintercept=sg, size=0.5, alpha=0.2)
ggplot(results, aes(x=time)) +
geom_line(aes(y=pledged), linetype="dotted") +
geom_line(aes(y=pledged_cont), linetype="solid") +
geom_hline(yintercept=sg, size=0.5, alpha=0.2) +
scale_y_continuous("pledged ($)", limits=c(0,NA), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8))
min(time)
ggplot(results, aes(x=time)) +
geom_line(aes(y=pledged), linetype="dotted") +
geom_line(aes(y=pledged_cont), linetype="solid") +
geom_hline(yintercept=sg, size=0.5, alpha=0.2) +
scale_y_continuous("pledged ($)", limits=c(0,NA), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
#scale_y_continuous(pledged ($)", limits=c(0,NA), labels=function(x) sprintf("%.3f", x/1000), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(results$time), stop_time), minor_breaks=pretty_breaks(n=45))
source('~/prj/crowdfounding/analyze.R')
ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min(aggs$rate),40000), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(results$time), stop_time2), minor_breaks=pretty_breaks(n=45))
ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min(aggs$rate),60000), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(results$time), stop_time2), minor_breaks=pretty_breaks(n=45))
ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min(aggs$rate),NA), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(results$time), stop_time2), minor_breaks=pretty_breaks(n=45))
ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min(aggs$rate),75000), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(results$time), stop_time2), minor_breaks=pretty_breaks(n=45))
source('~/.active-rstudio-document')
ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=pledged), linetype="solid") +
geom_hline(yintercept=sg, size=0.5, alpha=0.2) +
scale_y_continuous(limits=c(0,NA), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(results$time), stop_time), minor_breaks=pretty_breaks(n=45))
source('~/prj/crowdfounding/analyze.R')
min_rate = min(aggs$rate)
# max_rate = 20000
# max_rate = 75000
max_rate = NA
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min_rate,max_rate), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(results$time), stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
View(aggs)
(59124+2*25602+3*23430+4*9234+5*21306+4*25704+3*14148+2*5940+1*8436)/(1+2+3+4+5+4+3+2+1)
c(59124, 25602, 23430, 9234, 21306, 25704, 14148, 5940, 8436)*t(c(1,2,3,4,5,4,3,2,1))/(1+2+3+4+5+4+3+2+1)
c(59124, 25602, 23430, 9234, 21306, 25704, 14148, 5940, 8436)*c(1,2,3,4,5,4,3,2,1)/(1+2+3+4+5+4+3+2+1)
c(59124, 25602, 23430, 9234, 21306, 25704, 14148, 5940, 8436)%*%t(c(1,2,3,4,5,4,3,2,1))/(1+2+3+4+5+4+3+2+1)
t(c(59124, 25602, 23430, 9234, 21306, 25704, 14148, 5940, 8436))%*%c(1,2,3,4,5,4,3,2,1)/(1+2+3+4+5+4+3+2+1)
t(c(25602, 23430, 9234, 21306, 25704, 14148, 5940, 8436, 3546))%*%c(1,2,3,4,5,4,3,2,1)/(1+2+3+4+5+4+3+2+1)
rollapply(c(1,0,0,0,0,0,0,0,0), window_width, function(x) weighted.mean(x, weights))
rollapply(c(1,0,0,0,0,0,0,0,0,0), window_width, function(x) weighted.mean(x, weights))
rollapply(aggs$rate, window_width, function(x) weighted.mean(x, weights))
length(rollapply(aggs$rate, window_width, function(x) weighted.mean(x, weights)))
length(aggs$rate)
length(rollapply(aggs$rate, window_width, function(x) weighted.mean(x, weights), fill=NA))
length(rollapply(aggs$rate, window_width, function(x) weighted.mean(x, weights), fill=NA))
rollapply(aggs$rate, window_width, function(x) weighted.mean(x, weights), fill=NA)
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/.active-rstudio-document')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/.active-rstudio-document')
rate_notches = c(4000, 3000, 2000)
min_rate = min(aggs$rate)
# max_rate = NA
max_rate = 20000
# max_rate = 75000
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red") +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min_rate,max_rate), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(results$time), stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
rate_notches = c(4000, 3000, 1500)
min_rate = min(aggs$rate)
# max_rate = NA
max_rate = 20000
# max_rate = 75000
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red") +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min_rate,max_rate), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min(results$time), stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
rate_notches = c(4000, 3000, 1500)
min_rate = min(aggs$rate)
# max_rate = NA
max_rate = 20000
# max_rate = 75000
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red") +
annotate(x=min_time, y=rate_notches, label=rate_notches) +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min_rate,max_rate), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min_time, stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
min_time = min(results$time)
g3 = ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red") +
annotate(x=min_time, y=rate_notches, label=rate_notches) +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min_rate,max_rate), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min_time, stop_time2), minor_breaks=pretty_breaks(n=45))
print(g3)
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
View(aggs)
source('~/prj/crowdfounding/analyze.R')
View(aggs)
traceback()
ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5)
ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid")
ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red")
ggplot(aggs, aes(x=interval)) +
geom_line(aes(y=rate, ymin=sliding_rate), linetype="dotted", size=0.5) +
geom_line(aes(y=sliding_rate), linetype="solid") +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red") +
annotate(x=min_time, y=rate_notches, label=rate_notches)
source('~/.active-rstudio-document')
source('~/prj/crowdfounding/analyze.R')
View(results)
traceback()
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/.active-rstudio-document')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/.active-rstudio-document')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
g3 +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red") +
annotate(x=min_time, y=rate_notches, label=sprintf("%g", rate_notches)) +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min_rate,max_rate), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min_time, stop_time2), minor_breaks=pretty_breaks(n=45))
g3 +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red") +
annotate("text", x=min_time, y=rate_notches, label=sprintf("%g", rate_notches)) +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min_rate,max_rate), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min_time, stop_time2), minor_breaks=pretty_breaks(n=45))
g3 +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red") +
annotate("text", x=min_time, y=rate_notches, label=sprintf("%g", rate_notches), size=2) +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min_rate,max_rate), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min_time, stop_time2), minor_breaks=pretty_breaks(n=45))
g3 +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red") +
annotate("text", x=min_time, y=rate_notches+100, label=sprintf("%g", rate_notches), size=4) +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min_rate,max_rate), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min_time, stop_time2), minor_breaks=pretty_breaks(n=45))
3%%2
3%%3
g3 +
geom_hline(yintercept=rate_notches, size=0.5, alpha=0.2, colour="red") +
annotate("text", x=min_time, y=rate_notches+100, label=sprintf("%g", rate_notches), size=3) +
#geom_smooth(aes(y=sliding_rate)) +
scale_y_continuous("rate ($/d)", limits=c(min_rate,max_rate), labels=function(x) format(x, big.mark="'", scientific=FALSE), breaks=pretty_breaks(n=8)) +
scale_x_datetime("date", limits=c(min_time, stop_time2), minor_breaks=pretty_breaks(n=45))
source('~/prj/crowdfounding/analyze.R')
traceback()
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
source('~/prj/crowdfounding/analyze.R')
